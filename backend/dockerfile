FROM node:20

WORKDIR /app

COPY . .

RUN npm install && \
  npm rebuild bcrypt --build-from-source

RUN npx prisma generate

EXPOSE 8888

CMD ["npm", "run", "dev"]